# Эмуляторы в Android Studio

> [!tip]
> **Главным преимуществом** эмулятора при тестировании является то, что он дает мгновенный доступ к любой версии Android или любому устройству, на котором нужно проверить работу приложения.
> 
> Эмулятор Android может имитировать работу смартфона, планшета, часов Wear OS и устройств Android TV.

#### Также он содержит в себе конфигурации популярных типов устройств.

С его помощью можно имитировать:

- входящие звонки и сообщения
- указывать местоположение
- тестировать различные скорости мобильного интернета
- тестировать повороты экрана и различные датчики, как у реального устройства.

Однако не все возможности поддерживаются эмулятором, в этом случае придется воспользоваться реальным устройством.

Каждый экземпляр эмулятора использует **AVD (Android Virtual Device)**.

> [!info]
> **AVD** — это конфигурация, которая определяет характеристики устройства, которое нужно эмулировать: форм-фактор, версию Android и различные характеристики.

Он содержит следующие компоненты:

- **Профиль устройства**

    Профиль устройства определяет характеристики устройства, которое нужно эмулировать. Менеджер AVD содержит в себе несколько предустановленных профилей (такие устройства, как Nexus и Pixel), но также позволяет создавать свои собственные.

- **Образ системы**

    Содержит нужную версию Android, Для полноты тестирования лучше всего создавать AVD для каждой версии Android, которую поддерживает приложение.

- **Область хранения**
    
    AVD имеет специальную область хранения нa компьютере. В ней хранятся пользовательские данные, устройства, такие как установленные данные, приложения и настройки.

<br>    

Чтобы создать новый девайс, необходимо в меню выбрать **Tools — AVD Manager**. Откроется окно менеджера, далее **Create Virtual Device**, и выбираем нужную категорию/устройство. 

### Уровень API

> [!info]
> **Уровень API** — целочисленное значение, однозначно идентифицирующее версию API фреймворка, предлагаемую платформой Android.

Платформа Android предоставляет **Framework API**, который могут использовать приложения для взаимодействия с нижележащей системой Android.


Framework API состоит из:

- Базового набора пакетов и классов
- Набора элементов XML и атрибутов для декларирования в файле манифеста (manifest file)
- Набора элементов XML и атрибутов ДЛЯ декларирования и доступа к ресурсам
- Набора намерений (Intents)
- Набора разрешений доступа к ресурсам устройства и системы, которые приложение может запросить, а также защита ограничения доступа, встроенная в систему

> [!tip]
> Обычно обновления API фреймворка платформы разрабатываются таким образом, чтобы новая версия API оставалась совместимой с более ранними версиями, поэтому большинство изменений в новом API являются аддитивными, а старые части API становятся устаревшими, но не удаляются.

Уровень API важен, поскольку если он будет меньше чем тот, что указан в манифесте приложения, приложение не будет установлено на этот эмулятор.

Нажатие на `Show Advanced Settings` открывает дополнительные настройки, в которых можно изменить следующее:

- **Фронтальную/основную камеру**. Вместо эмуляции изображения есть возможность использовать в качестве камеры подключённую веб-камеру.
- **Скорость и качество интернет-соединения**.
- **Способ загрузки**. Если выбрать Quick Boot, то эмулятор будет сохранять текущее состояние при выключении и загружать его при включении.
- **Количество выделенной оперативной памяти места на диске.**
- **Включение/отключение ввода с клавиатуры.**

> Эмулятор Android позволяет тестировать самые разные функции. Их можно настроить, нажав на кнопку Extended Controls в меню рядом с эмулятором.

- **Location** — позволяет симулировать изменение местоположения устройства. В этом окне можно задавать широту, долготу и высоту и отслеживать изменение координат.
- **Cellular** — настройки связи, её качества.
- **Battery** — можно установить уровень заряда батареи и её состояние (заряжается, разряжается и так далее).
- **Phone** — управление звонками и смс, моделирование ситуаций входящих/исходящих звонков и сообщений.

Аналогичным образом можно отправить сообщение введя текст введя в поле `SMS message`

> [!success] Простыми словами
> 
> Android Studio предоставляет эмуляторы, позволяющие имитировать работу различных устройств и версий Android с помощью профилей устройств, образов системы и области хранения. Это позволяет разработчикам проверять и дебажить их приложения на различных устройствах и уровнях API, чтобы быть уверенными в том, что приложение работает идеально на любом устройстве. Android Studio предоставляет инструменты для настройки виртуальных устройств и тестирования приложений, что делает программирование под Android более простым.